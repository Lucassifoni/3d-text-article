(function(t){function e(e){for(var r,o,s=e[0],c=e[1],u=e[2],p=0,f=[];p<s.length;p++)o=s[p],i[o]&&f.push(i[o][0]),i[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},i={app:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("c21b"),i=n.n(r);i.a},"0fe1":function(t,e,n){"use strict";var r=n("b9f6"),i=n.n(r);i.a},"1fc2":function(t,e,n){},"3b8d":function(t,e,n){"use strict";var r=n("e2e3"),i=n.n(r);i.a},"3c2e":function(t,e,n){"use strict";var r=n("704c"),i=n.n(r);i.a},5003:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t._m(0),n("main",{staticClass:"Content"},[n("article",[n("manual"),n("programmatically")],1)])])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("nav",[n("a",{attrs:{href:"https://lucassifoni.info"}},[t._v("← back to lucassifoni.info")])]),n("h1",[t._v("Explorations on creating lead type from SVG shapes")]),n("p",[t._v("A notebook about trying to find a silver bullet to automate a tedious manual process."),n("br"),t._v("After a bit of manual work, I decided to automate this process.\nIt turns out that this process was absolutely non-trivial, and that I'd better develop a strict framework and guidelines around doing it manually.")])])}],o=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("h2",[t._v("A first manual attempt")]),n("h3",[t._v("How does a lead character look ?")]),n("p",[t._v("A bit of context is needed on what I'm trying to attain. I'd like to be able to be self-sufficient on the production of lead-like movable characters and shapes.")]),n("figure",[n("img",{attrs:{src:"pictures/lead_type.jpg"}}),n("span",{staticClass:"author"},[t._v("This image was originally posted to Flickr by quinet at https://flickr.com/photos/91994044@N00/25792503796.")])]),n("p",[t._v("In Toulouse, the place I live in southwestern France, some workshops offer their CNC machining services and are able to produce aluminum plates at the correct height for a typographic press. But I'd like a typographic press to become an experimentable tool, rather than a final process, marked by the need to be absolutely certain of a layout before sending it to be engraved.")]),n("p",[t._v("A distinct, but crucial feature of engraved aluminum plates or lead type was that the shape to be printed wasn't just extruded out of its substrate. The shape emerges of a pillar similar to an offset of its outline. On the figure below, you can see this slight offset. Extruding a shape is obviously simple, but this gives strength to the character.")]),n("figure",[n("img",{attrs:{src:"pictures/lead_type_2.jpg"}}),n("span",{staticClass:"author"},[t._v("Free picture by https://fr.freeimages.com/photo/lead-type-1-1460305")])]),n("h3",[t._v("How can we reproduce this slope manually ?")]),n("p",[t._v("Even more crucially, if I'm headed towards lost PLA aluminum casting with 3D printed counterforms, meaning another bee's nest, I'll start by using plastic characters to print. After some failed attempts years ago, they failed under pressure if the shape of the letter wasn't strengthened by this light slope.")]),n("p",[t._v("This slope is quite tedious to generate manually : I start from path data from Inkscape or Illustrator, import it into Blender, extrude it, offset it with Offset Scale (Alt + S), intersect it with a regular cube to suppress distorsion from Offset Scale, export it to a STL file, clean it in Netfabb, and then slice it in Cura.")]),n("figure",[n("img",{attrs:{src:"pictures/letter_h_svg.jpg"}}),n("span",{staticClass:"author"},[t._v('"h" bold italic in Input from FontBureau, in Inkscape')]),n("img",{attrs:{src:"pictures/letter_h_blender.jpg"}}),n("span",{staticClass:"author"},[t._v("after an import and offset extrusion in Blender")]),n("img",{attrs:{src:"pictures/letter_h_netfabb.jpg"}}),n("span",{staticClass:"author"},[t._v("then imported into Netfabb")]),n("img",{attrs:{src:"pictures/letter_h_cura.jpg"}}),n("span",{staticClass:"author"},[t._v("and finally sliced in Cura")])]),n("p",[t._v("This process is tedious. I thought I could automate it, starting from SVG path data. The rest of this page shows how this was way more complex than I thought, and, after a week of exploration, it's obvious I should have thought of intersecting paths, paths with holes, concave shapes, and a lot more traps.")]),n("figure",[n("img",{attrs:{src:"pictures/u_3d.jpg"}}),n("img",{attrs:{src:"pictures/u_3d_print.jpg"}})])])}],c={name:"Manual"},u=c,l=(n("c508"),n("2877")),p=Object(l["a"])(u,o,s,!1,null,null,null);p.options.__file="Manual.vue";var f=p.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("h2",[t._v("Creating a lead type 3D model with its slope, from raw SVG path data.")]),n("h3",[t._v("SVG path data structure")]),n("p",[t._v("Here's a box containing an outlined \"h\" in Vulf Mono Light Italic, a typeface by Oh No type company. We'll try to understand how this list of instructions work.")]),n("foldable-pre",[t._v('<path style="stroke:#130000;stroke-opacity:1;stroke-width:4.42498882;stroke-miterlimit:4;stroke-dasharray:none;paint-order:markers stroke fill;fill:#ff0000;fill-opacity:1"\nd="m 205.47289,169.14572 c -1.08,0 -1.56,-0.6 -1.56,-1.64 0,-3.4 4.68,-7.48 4.68,-12.04 0,-3 -1.88,-4.52 -4.84,-4.52 -3.52,0 -6.96,1.48 -10.4,7.2 h -0.56 c 2.08,-4.8 3.48,-8.48 3.48,-11.48 0,-2.24 -1.28,-3.36 -3.52,-3.36 -1.52,0 -3.12,0.44 -4.8,1.12 0.36,0.68 0.64,1.44 0.84,2.08 1.48,-0.68 2.48,-1.04 3.64,-1.04 1.28,0 1.84,0.6 1.84,1.76 0,2.92 -3.32,10.88 -8,23.16 0.8,0.12 1.44,0.24 2,0.48 l 0.12,0.04 c 5.68,-15.48 11.24,-18 14.92,-18 1.88,0 3.04,0.8 3.04,2.72 0,3.52 -4.68,7.64 -4.68,11.96 0,2.44 1.64,3.52 3.48,3.52 2.48,0 4.04,-1.56 6.08,-4.2 -0.72,-0.48 -1.12,-0.8 -1.68,-1.28 -1.4,2.28 -2.52,3.52 -4.08,3.52 z"\nid="path1702" />')]),t._m(0),t._m(1),t._m(2),n("p",[t._v("With those elements in mind, we can decipher the above svg path, and annotate it :")]),n("foldable-pre",[t._v("m 205.47289,169.14572 // Move to (205.47289, 169.14572)\nc -1.08,0 -1.56,-0.6 -1.56,-1.64 // Cubic Bézier (relative, from last point, first tensor at (-1.08, 0), second tensor at (-1.56, -0.9), end point at (-1.56, -1.64))")]),n("h3",[t._v("Introducing a clearer notation for our research")]),n("p",[t._v('This notation is a bit hard to read, so we\'ll introduce "functions", that return the current point. Points will be a kind of tuples (x, y).')]),n("p"),n("foldable-pre",[t._v("m 205.47289,169.14572 // move((205.47289, 169.14572))\nc -1.08,0 -1.56,-0.6 -1.56,-1.64 // cubicRel(lp, (-1.08,0), (-1.56,-0.6), (-1.56,-1.64))")]),n("p",[t._v('We can see a pattern emerging : a dependency on a global "current point" state. To write a parser/an interpreter, this isn\'t too uncommon. We could also think of this in a functional way, and use referential transparency at our advantage :')]),n("foldable-pre",[t._v("m 205.47289,169.14572 // move((205.47289, 169.14572)) -> returns ((205.47289, 169.14572))")]),n("p",[t._v("The last sample with two instructions becomes :")]),n("foldable-pre",[t._v("cubicRel((-1.08,0), (-1.56,-0.6), (-1.56,-1.64))")]),n("p",[t._v("If we introduce the following instruction in the original path, another cubic Bézier curve, our path now looks like :")]),n("foldable-pre",[t._v("cubicRel(\ncubicRel(\n  move((205.47289, 169.14572)),\n  (-1.08,0), (-1.56,-0.6), (-1.56,-1.64))\n , (0,-3.4), (4.68,-7.48), (4.68,-12.04))")]),n("p",[t._v("Well. As much as I like lisps, maybe a parser with a global state will be enough. I only aim to parse svg paths, so the table defined earlier on will be enough to guide us. Maybe, even, we could just avoid a global state and produce a list of instructions taking the last point as an argument, and reevaluating everything to absolute coordinates.")]),n("foldable-pre",[t._v("move((205.47289, 169.14572)) // -> (205.47289, 169.14572)\ncubicRel((205.47289, 169.14572),\n (204,39289, 169.14572),\n (203,91289, 168,54572),\n (203,91289, 167,50572)) // -> (203,91289, 167,50572)")]),n("p",[t._v("This seems quite easy to generate ! Let's write the minimal amount of code to parse those two declarations to an AST, and produce this kind of pseudo-instruction list. I'm writing all of this in a html document, so I'll write in JS to get live examples quick and running.")]),n("h3",[t._v("Parsing SVG path data to an AST with a reduced grammar")]),t._m(3),t._m(4),n("foldable-pre",[t._v("path = instructions*\ninstruction = move point | cubic point point point point\npoint = '('number','number')'\nnumber = '-'?digit+'.'?digit+\ndigit = [0-9]")]),t._m(5),n("parser-first-step"),n("p",[t._v("This live example uses the following JS implementation : we have a regex to identify points, and define regexes for move and cubic instructions. We only tokenize the input by splitting at newlines, trimming the resulting lines, and filtering empty ones.")]),n("foldable-pre",[t._v("const Point = function(x, y) { this.x = x; this.y = y; };\nconst pointR = '(?:([-]*\\\\d+\\\\.?(?:\\\\d+)?),([-]*\\\\d+\\\\.?(?:\\\\d+)?))';\n\nconst moveRegex = new RegExp(`m\\\\s*${pointR}`, 'i');\nconst cubicRegex = new RegExp(`c\\\\s*${pointR}\\\\s${pointR}\\\\s${pointR}`, 'i');\n\nconst matchesToPoints = (token, matches) => {\n  if (!matches) throw new Error(`Couldn't parse token ${token}`);\n  const points = matches.slice(1);\n  if (points.length % 2 !== 0) throw new Error(`Instruction contains an uneven number of coordinates.`);\n  const out = [];\n  for (let i = 0; i < points.length; i += 2) {\n    out.push(new Point(points[i], points[i + 1]));\n  }\n  return out;\n};\n\nconst move = token => matchesToPoints(token, token.match(moveRegex));\nconst cubic = token => matchesToPoints(token, token.match(cubicRegex));\n\nconst lex = (tokens) => {\n  return tokens.map(t => {\n    switch (t.charAt(0).toLowerCase()) {\n      case \"m\":\n        return {type: 'Move', params: move(t) };\n      break;\n      case \"c\":\n        return {type: 'Cubic', params: cubic(t) };\n      break;\n      default:\n        return;\n      break;\n    }\n  });\n};\n\nconst tokenize = text => text.split('\\n').map(a => a.trim()).filter(a => a);\nexport const parse = text => lex(tokenize(text));")]),n("h3",[t._v("Parsing realistic input")]),t._m(6),n("parser-second-step"),n("h3",[t._v("Rendering to a list of expressions & a canvas")]),n("p",[t._v("Well, it seems to work for those two instructions ! The current point is carried on, and we have independent instructions that are sufficient to render something.")]),n("p",[t._v("We can try to render it to a list of expressions, akin to an example shown higher, then to a canvas.")]),n("parser-third-step"),n("h3",[t._v("Adding H,h, L,l, and V,v instructions")]),n("p",[t._v("Nice ! We're now able to transform raw SVG path data to an abstract syntax tree, and transform it back to a list of absolute-positioned subpaths, or draw it to a canvas. But many instructions are missing, and the examples to this point just silence errors.")]),n("p",[t._v("Let's implement h, l, and v instructions. H and V are just special cases of L where the current point Y or X coordinate is carried on.")]),n("parser-fourth-step"),n("h3",[t._v("Converting curves to segments")]),n("p",[t._v("Our next step is a conversion from curves to only-segments path data.")]),n("parser-fifth-step"),n("h3",[t._v("Transforming our original path to an offset reflection")]),t._m(7),n("p",[t._v("Meaning : move([1,0]), line([1,0] [5,0]), line([5, 0] [7,2]) becomes [1,0],[1,0],[5,0],[5,0],[7,2] then [1,0],[5,0],[7,2].")]),t._m(8),n("p",[t._v("We now have points instead of curves, and a method, we'll proceed to do this scale-up algorithm. Or will we ?")]),n("parser-sixth-step"),t._m(9),t._m(10),n("parser-seventh-step"),t._m(11),t._m(12),n("p",[t._v("This test, an adaptation of THREE.js's example \"ConvexGeometry\", reveals that a naïve culling approach won't be enough: our polygons are concave.")]),t._m(13),t._m(14),n("p",[t._v("Or, let's develop a manual process with straight guidelines.")]),t._m(15)],1)},d=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("According to "),n("a",{attrs:{href:"http://svgpocketguide.com/book/#section-2"}},[t._v("the SVG Pocket Guide")]),t._v(', the "d" attribute contains instructions with mnemonics and values. We\'ll also keep the SVG Stroke spec in a tab, because an implementation of a stroke algorithm is outlined. '),n("a",{attrs:{href:"https://www.w3.org/TR/svg-strokes/#SpecifyingStrokePaint"}},[t._v("W3 SVG spec")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"table striped"},[n("thead",[n("th",[t._v("mnemonic")]),n("th",[t._v("meaning")]),n("th",[t._v("observations")])]),n("tbody",[n("tr",[n("td",[t._v("m or M")]),n("td",[t._v("move to")]),n("td",[t._v("akin to a pen lift. a path must start with a M command.")])]),n("tr",[n("td",[t._v("z or Z")]),n("td",[t._v("close path")]),n("td",[t._v("closes the current subpath. draws a straight line between that point and the initial point of the subpath. If a M instruction follows, the next subpath starts at the newly-defined coordinate. Else, the next subpath starts at the same point.")])]),n("tr",[n("td",[t._v("L or l")]),n("td",[t._v("draw")]),n("td",[t._v("draws a line from the current point to the next point. The new point becomes the current point. "),n("strong",[t._v("L")]),t._v(" means that following positions are absolute, "),n("strong",[t._v("l")]),t._v(" means relative.")])]),n("tr",[n("td",[t._v("H or h")]),n("td",[t._v("draw an horizontal line")]),n("td",[t._v("Akin to L,l H and h denote absolute and relative positioning.")])]),n("tr",[n("td",[t._v("V or v")]),n("td",[t._v("draw a vertical line")]),n("td",[t._v("Akin to L,l and H,h, V and v denote absolute and relative positioning.")])]),n("tr",[n("td",[t._v("C or c")]),n("td",[t._v("Draw a cubic Bézier curve")]),n("td",[t._v("Draw a curve from the current point, using (x1,y1) as the first control point, and (x2, y2) as the second control point. The same uppercase/lowercase to absolute/relative mapping is effective.")])]),n("tr",[n("td",[t._v("S or s")]),n("td",[t._v("Draw a cubic Bézier curve, with reflection")]),n("td",[t._v("Draw a curve following a C statement, with tensor points mirrored.")])]),n("tr",[n("td",[t._v("Q or q")]),n("td",[t._v("Draw a quadratic Bézier curve")]),n("td",[t._v("Quadratic Bézier curves have a single (x1, y1) tensor.")])]),n("tr",[n("td",[t._v("T and t")]),n("td",[t._v("Draw a quadratic Bézier curve")]),n("td",[t._v("Akin to S and s following a cubic Bézier curve, T and t are mirroring statements for a quadratic Bézier curve.")])]),n("tr",[n("td",[t._v("A and a")]),n("td",[t._v("Draw a segment of an ellipse.")]),n("td",[t._v("A statements draw a segment of an ellipse, given a start point, end point, x radius, y radius, rotation of the ellipse, and direction. Two additional parameters, large-arc and sweep, are flags giving directions on which part of the ellipse should be drawn.")])])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("figure",[n("img",{attrs:{src:"pictures/man_1.jpg"}}),n("img",{attrs:{src:"pictures/man_3.jpg"}}),n("img",{attrs:{src:"pictures/man_2.jpg"}}),n("span",{staticClass:"author"},[t._v("early sketches of the process as I imagined it")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("Let's start by drafting a grammar allowing those two instructions to exist. This syntax and prose is vague compared to a real grammar description language, and the SVG spec contains a backus-naur form of the SVG grammar."),n("br"),t._v("But it should read :")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("a "),n("em",[t._v("path")]),t._v(" is made of "),n("em",[t._v("instructions")]),t._v(".")]),n("li",[n("em",[t._v("instructions")]),t._v(" can be "),n("em",[t._v("move")]),t._v(" or "),n("em",[t._v("cubic")]),t._v(".")]),n("li",[n("em",[t._v("instructions")]),t._v(" take a various number of "),n("em",[t._v("points")]),t._v(".")]),n("li",[t._v("a "),n("em",[t._v("point")]),t._v(" is made of two "),n("em",[t._v("numbers")]),t._v(" separated by a comma, between parentheses.")]),n("li",[t._v("a "),n("em",[t._v("number")]),t._v(" is an optional hyphen, followed by multiple "),n("em",[t._v("digits")]),t._v(", an optional dot, and maybe multiple "),n("em",[t._v("digits")]),t._v(" again")]),n("li",[t._v("finally, a "),n("em",[t._v("digit")]),t._v(" is any character in [0 1 2 3 4 5 6 7 8 9]")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("This is enough to write a basic parser that understands standalone "),n("em",[t._v("move")]),t._v(" and "),n("em",[t._v("cubic")]),t._v(" instructions.")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("Still, we're assuming many things here. We need a list of newline-separated instructions, starting with their mnemonic.The input format is a list of instructions, without newlines, and mnemonics are only present at an instruction change.\nThat means "),n("code",[t._v("m point \\n c point point point \\n c point point point")]),t._v(" won't ever be present.\nWe need a way to keep track of the current type of instruction, and take points accordingly.\n"),n("br"),t._v("Let's do this !")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("I'm not sure how to proceed for this one, but : for three points (or vector) a, b, and c, the point b' will be equal to the vector b added to the vector going from the middle of the segment "),n("em",[t._v("ac")]),t._v(" to b."),n("br"),t._v("Let's draw points instead of lines now, by writing a converter from instructions to points. A brute version would be to reduce instruction points to a list, then deduplicate adjacent items.")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("figure",[n("img",{attrs:{src:"pictures/m_1.jpg"}}),n("img",{attrs:{src:"pictures/m_2.jpg"}}),n("span",{staticClass:"author"},[t._v("Drawings made by Laura Savignac to help me find a method")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("It happens that the problem I'm trying to solve is really non-trivial. With a bit more research (and stumbling on the right terms), what I'm trying to solve is called \"outward polygon offsetting\".\n"),n("a",{attrs:{href:"https://stackoverflow.com/questions/1109536/an-algorithm-for-inflating-deflating-offsetting-buffering-polygons"}},[t._v("A stackoverflow answer")]),t._v(" gave me some direction. "),n("a",{attrs:{href:"http://fcacciola.50webs.com/Offseting%20Methods.htm"}},[t._v("This survey gave a nice answer too.")]),t._v("\nWhat if a simpler strategy could work ? I could reimplement a C++/C#/Delphi library called "),n("a",{attrs:{href:"http://www.angusj.com/delphi/clipper.php"}},[t._v("Clipper")]),t._v(', or find a "nice enough" heuristic.\nI could copy-paste a stroke algorithm and take its output before rendering. Let\'s dive into Inkscape sources. Or into Clipper, and extract the subroutine and its dependencies.')])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("For now, let's test with a library found on npm, "),n("a",{attrs:{href:"https://github.com/w8r/polygon-offset"}},[t._v("polygon-offset")]),t._v(". It seems nice enough to be free of assumptions about how you describe a polygon, and is satisfied with an array of points.")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("We have an offset outline, and implementing this by hand would have been a nightmare. Can we make this 3d ? I'll take "),n("a",{attrs:{href:"https://threejs.org/examples/?q=conv#webgl_geometry_convex"}},[t._v("This example from three.js")]),t._v(' as a starting point. What was meant to be an "implement everything" exercise turns more and more to a "cobble stuff together" exercise. But I now have a nice stack of papers to read. Clicking "download" on three.js homepage yields a 250MB zip file, I should have known what territory I was stepping into.')])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("figure",[n("img",{attrs:{src:"pictures/threejsconvex.jpg"}}),n("span",{staticClass:"author"},[t._v("Three.js's example adapted with current path & offset data.")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("Let's dive into "),n("a",{attrs:{href:"https://en.wikipedia.org/wiki/Polygon_triangulation"}},[t._v("polygon triangulation")]),t._v(", I guess ? There are naïve algorithms available, and I'll then proceed to implement stitching between the original and offset shape.")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("figure",[n("img",{attrs:{src:"pictures/openscad.jpg"}}),n("span",{staticClass:"author"},[t._v("An adaptation of a script found on the OPENSCAD forums. I can't find the link back, email me if you're the author !")]),n("img",{attrs:{src:"pictures/h_svg.jpg"}}),n("span",{staticClass:"author"},[t._v("my starting point")]),n("img",{attrs:{src:"pictures/svg_3.jpg"}}),n("span",{staticClass:"author"},[t._v("I should have known before starting, with those manual tests, that my naïve approach wasn't going to cut it.")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("Thanks for reading ! "),n("a",{attrs:{href:"#top"}},[t._v("↑ back to top")])])}],v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"textarea",domProps:{value:t.input},on:{change:t.parseAndDisplay,input:function(e){e.target.composing||(t.input=e.target.value)}}}),n("foldable-pre",[t._v(t._s(JSON.stringify(t.result,null,2)))])],1)},m=[],b=(n("28a5"),n("4917"),n("3b2b"),function(t,e){this.x=t,this.y=e}),g="(?:([-]*\\d+\\.?(?:\\d+)?),([-]*\\d+\\.?(?:\\d+)?))",y=new RegExp("m\\s*".concat(g),"i"),w=new RegExp("c\\s*".concat(g,"\\s").concat(g,"\\s").concat(g),"i"),_=function(t,e){if(!e)throw new Error("Couldn't parse token ".concat(t));var n=e.slice(1);if(n.length%2!==0)throw new Error("Instruction contains an uneven number of coordinates.");for(var r=[],i=0;i<n.length;i+=2)r.push(new b(n[i],n[i+1]));return r},x=function(t){return _(t,t.match(y))},k=function(t){return _(t,t.match(w))},C=function(t){return t.map(function(t){switch(t.charAt(0).toLowerCase()){case"m":return{type:"Move",params:x(t)};case"c":return{type:"Cubic",params:k(t)};default:return}})},S=function(t){return t.split("\n").map(function(t){return t.trim()}).filter(function(t){return t})},E=function(t){return C(S(t))},N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"FoldablePre"},[n("pre",{class:t.open?"open":""},[n("code",[t._t("default")],2)]),t.open?n("small",{on:{click:function(e){t.open=!t.open}}},[t._v("Code sample is unfolded. Close it ?")]):n("small",{on:{click:function(e){t.open=!t.open}}},[t._v("Code sample is folded. Open it ?")])])},$=[],T={name:"FoldablePre",data:function(){return{open:!1}}},L=T,A=(n("3c2e"),Object(l["a"])(L,N,$,!1,null,null,null));A.options.__file="FoldablePre.vue";var j=A.exports,R={name:"ParserFirstStep",components:{FoldablePre:j},data:function(){return{input:"m 205.47289,169.14572\nc -1.08,0 -1.56,-0.6 -1.56,-1.64",result:[]}},methods:{parseAndDisplay:function(){this.result=E(this.input)}},mounted:function(){this.parseAndDisplay()}},O=R,P=(n("770a"),Object(l["a"])(O,v,m,!1,null,null,null));P.options.__file="ParserFirstStep.vue";var M=P.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",[t._v("We need to have a kind of state-machine, starting at an undetermined state, and chewing through text obeying rules for the current state, and a list of transitions between states. Here's some pseudo-code defining those principles. We'll write a basic parser that aims to keep track of the current point and generate a list of independent instructions.")]),n("p",[t._v("We'll also translate all coordinates to absolute by adding the current point's absolute coordinates to every point present in a relative version of an instruction.")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"textarea",domProps:{value:t.input},on:{change:t.parseAndDisplay,input:function(e){e.target.composing||(t.input=e.target.value)}}}),n("foldable-pre",[t._v("\nStates : "+t._s(JSON.stringify(t.STATES))+"\n\nTokenizing : trim, then split at spaces.\n"+t._s(JSON.stringify(t.result1))+"\n\nLexing : transform this into a list of instructions.\n"+t._s(JSON.stringify(t.result2,null,2))+"\n    ")]),n("p",[t._v("The JS code present in this sample, annotated :")]),n("foldable-pre",[t._v("\n// \"Enums\" for positions and parser state\nexport const STATES = fakeEnum('Undefined', 'Move', 'Cubic', 'End');\nconst POSITIONS = fakeEnum('Absolute', 'Relative');\n\n// Point string to absolute point, depending on\n// the carried current point and positioning mode\nconst strToPt = (str, curr, pos) => {\n  const c = curr ? curr : { x:0, y:0 };\n  if (!pointReg.test(str)) throw new Error();\n  let [expr, x, y] = str.match(pointReg);\n  if (pos === POSITIONS.Relative) { x = Number(x) + c.x; y = Number(y) + c.y; };\n  return new Point(Number(x), Number(y));\n}\n\n// Move and Cubic AST node generators\nconst move = (tokens, index, currentPoint, pos) => {\n  const [p1] = [tokens[index]]\n    .map(t => strToPt(t, null, pos));\n  const instr = { type: 'Move', points: [p1] };\n  return { instr, current: instr.points[0] };\n};\n\nconst cubic = (tokens, index, currentPoint, pos) => {\n  const [p1, p2, p3] = tokens.slice(index, index + 3)\n    .map(t => strToPt(t, currentPoint, pos));\n  const instr = { type: 'Cubic', points: [currentPoint, p1, p2, p3] };\n  return { instr, current: instr.points[3] };\n};\n    ")]),n("p",[t._v("The lexing function, carrying state and switches, acts as a transition table :")]),n("foldable-pre",[t._v('\n// For each token, depending on the state we\'re in, we\'ll try to parse a point or change state.\n// This is naïve, and will break on invalid input.\n\nconst lex = function(tokens) {\n  let state = STATES.Undefined;\n  let pos = POSITIONS.Absolute;\n  let currentPoint = null;\n  let instrs = [];\n  let i = 0;\n  const setPos = (token) => { pos = isUpperCase(token) ? POSITIONS.Absolute : POSITIONS.Relative; };\n  while (state !== STATES.End) {\n    const token = tokens[i];\n    if (state === STATES.Undefined) {\n      switch(token.toLowerCase()) {\n        case "m":\n          state = STATES.Move;\n          i += 1;\n        break;\n        case "c":\n          state = STATES.Cubic;\n          i += 1;\n        break;\n      }\n      setPos(token);\n    } else if (state === STATES.Move) {\n      switch(token.toLowerCase()) {\n        case "c":\n          setPos(token);\n          state = STATES.Cubic;\n          i += 1;\n        break;\n        default:\n          try {\n            let { instr, current } = move(tokens, i, currentPoint, pos);\n            instrs.push(instr);\n            currentPoint = current;\n          } catch(e) {}\n          i += 1;\n        break;\n      }\n    } else if (state === STATES.Cubic) {\n      switch(token.toLowerCase()) {\n        case "m":\n          setPos(token);\n          state = STATES.Move;\n          i += 1;\n        break;\n        default:\n          try {\n            let { instr, current } = cubic(tokens, i, currentPoint, pos);\n            instrs.push(instr);\n            currentPoint = current;\n          } catch(e) {}\n          i += 3;\n        break;\n      }\n    }\n    if (i >= tokens.length -1) state = STATES.End;\n  }\n  return instrs;\n};\n    ')])],1)},B=[],D=(n("c5f6"),n("9393")),H=(n("ac6a"),n("456d"),function(t,e){this.x=t,this.y=e}),U=/(?:([-]*\d+\.?(?:\d+)?),([-]*\d+\.?(?:\d+)?))/,V=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(function(t,e){return t[e]=Object.keys(t).length,t},{})},F=V("Undefined","Move","Cubic","End"),W=V("Absolute","Relative"),z=function(t){return t.trim().split(" ")},q=function(t,e,n){var r=e||{x:0,y:0};if(!U.test(t))throw new Error;var i=t.match(U),a=Object(D["a"])(i,3),o=(a[0],a[1]),s=a[2];return n===W.Relative&&(o=Number(o)+r.x,s=Number(s)+r.y),new H(Number(o),Number(s))},G=function(t,e,n,r){var i=[t[e]].map(function(t){return q(t,null,r)}),a=Object(D["a"])(i,1),o=a[0],s={type:"Move",points:[o]};return{instr:s,current:s.points[0]}},J=function(t,e,n,r){var i=t.slice(e,e+3).map(function(t){return q(t,n,r)}),a=Object(D["a"])(i,3),o=a[0],s=a[1],c=a[2],u={type:"Cubic",points:[n,o,s,c]};return{instr:u,current:u.points[3]}},K=function(t){return t===t.toUpperCase()},Z=function(t){var e=F.Undefined,n=W.Absolute,r=null,i=[],a=0,o=function(t){n=K(t)?W.Absolute:W.Relative};while(e!==F.End){var s=t[a];if(e===F.Undefined){switch(s.toLowerCase()){case"m":e=F.Move,a+=1;break;case"c":e=F.Cubic,a+=1;break}o(s)}else if(e===F.Move)switch(s.toLowerCase()){case"c":o(s),e=F.Cubic,a+=1;break;default:try{var c=G(t,a,r,n),u=c.instr,l=c.current;i.push(u),r=l}catch(t){}a+=1;break}else if(e===F.Cubic)switch(s.toLowerCase()){case"m":o(s),e=F.Move,a+=1;break;default:try{var p=J(t,a,r,n),f=p.instr,h=p.current;i.push(f),r=h}catch(t){}a+=3;break}a>=t.length-1&&(e=F.End)}return i},Q=function(t){return Z(z(t))},X={name:"ParserFirstStep",components:{FoldablePre:j},data:function(){return{input:"m 205.47289,169.14572 c -1.08,0 -1.56,-0.6 -1.56,-1.64 0,-3.4 4.68,-7.48 4.68,-12.04",STATES:F,result1:[],result2:[]}},methods:{parseAndDisplay:function(){this.result1=z(this.input),this.result2=Q(this.input)}},mounted:function(){this.parseAndDisplay()}},Y=X,tt=(n("cc0a"),Object(l["a"])(Y,I,B,!1,null,null,null));tt.options.__file="ParserSecondStep.vue";var et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"textarea",domProps:{value:t.input},on:{change:t.parseAndDisplay,input:function(e){e.target.composing||(t.input=e.target.value)}}}),n("foldable-pre",[t._v(t._s(t.result))]),n("p",[t._v("Rendering to text is just a matter of pretty-printing AST nodes, while rendering to a canvas is conveniently a 1-to-1 mapping of our instructions to CanvasRenderingContext2D methods.")]),t._m(0),n("canvas",{attrs:{id:"parserthirdstep-canvas",width:"300",height:"300"}})],1)},rt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("move(point) -> c2d.moveTo(x, y)")]),n("li",[t._v("cubic(point, point, point, point) -> c2d.moveTo(...points[1]), c2d.bezierCurveTo(...points[1-3])")])])}],it=function(t){return t.map(function(t,e){return"Move"===t.type?"".concat(e,"| move([").concat(t.points[0].x,",").concat(t.points[0].y,"])"):"Line"===t.type?"".concat(e,"| line([").concat(t.points[0].x,",").concat(t.points[0].y,"],[").concat(t.points[1].x,",").concat(t.points[1].y,"])"):"VLine"===t.type?"".concat(e,"| vline([").concat(t.points[0].x,",").concat(t.points[0].y,"],[").concat(t.points[1].x,",").concat(t.points[1].y,"])"):"HLine"===t.type?"".concat(e,"| hline([").concat(t.points[0].x,",").concat(t.points[0].y,"],[").concat(t.points[1].x,",").concat(t.points[1].y,"])"):"Cubic"===t.type?"".concat(e,"| cubic([").concat(t.points[0].x,",").concat(t.points[0].y,"],[").concat(t.points[1].x,",").concat(t.points[1].y,"],[").concat(t.points[2].x,",").concat(t.points[2].y,"],[").concat(t.points[3].x,",").concat(t.points[3].y,"])"):void 0}).join("\n")},at=function(t,e){e.beginPath(),t.forEach(function(t){"Move"===t.type&&e.moveTo(6*t.points[0].x-100,6*t.points[0].y-100),"Cubic"===t.type&&(e.moveTo(6*t.points[0].x-100,6*t.points[0].y-100),e.bezierCurveTo(6*t.points[1].x-100,6*t.points[1].y-100,6*t.points[2].x-100,6*t.points[2].y-100,6*t.points[3].x-100,6*t.points[3].y-100))}),e.stroke()},ot={name:"ParserThirdStep",components:{FoldablePre:j},data:function(){return{input:"m 50,50 c -1.08,0 -1.56,-0.6 -1.56,-1.64 0,-3.4 4.68,-7.48 4.68,-12.04 0,-3 -1.88,-4.52 -4.84,-4.52 -3.52,0 -6.96,1.48 -10.4,7.2 h -0.56 c 2.08,-4.8 3.48,-8.48 3.48,-11.48 0,-2.24 -1.28,-3.36 -3.52,-3.36 -1.52,0 -3.12,0.44 -4.8,1.12 0.36,0.68 0.64,1.44 0.84,2.08 1.48,-0.68 2.48,-1.04 3.64,-1.04 1.28,0 1.84,0.6 1.84,1.76 0,2.92 -3.32,10.88 -8,23.16 0.8,0.12 1.44,0.24 2,0.48 l 0.12,0.04 c 5.68,-15.48 11.24,-18 14.92,-18 1.88,0 3.04,0.8 3.04,2.72 0,3.52 -4.68,7.64 -4.68,11.96 0,2.44 1.64,3.52 3.48,3.52 2.48,0 4.04,-1.56 6.08,-4.2 -0.72,-0.48 -1.12,-0.8 -1.68,-1.28 -1.4,2.28 -2.52,3.52 -4.08,3.52",result:""}},methods:{parseAndDisplay:function(){this.result=it(Q(this.input)),this.draw()},draw:function(){var t=this.$options.$context;t.fillStyle="lightblue",t.strokeStyle="black",t.fillRect(0,0,300,300),at(Q(this.input),t)}},mounted:function(){this.$options.$canvas=this.$el.getElementsByTagName("canvas")[0],this.$options.$context=this.$options.$canvas.getContext("2d"),this.parseAndDisplay()}},st=ot,ct=(n("b597"),Object(l["a"])(st,nt,rt,!1,null,null,null));ct.options.__file="ParserThirdStep.vue";var ut=ct.exports,lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"textarea",domProps:{value:t.input},on:{change:t.parseAndDisplay,input:function(e){e.target.composing||(t.input=e.target.value)}}}),n("foldable-pre",[t._v(t._s(t.result))]),n("canvas",{attrs:{id:"parserthirdstep-canvas",width:"300",height:"300"}})],1)},pt=[],ft=function(t,e){this.x=t,this.y=e},ht=/(?:([-]*\d+\.?(?:\d+)?),([-]*\d+\.?(?:\d+)?))/,dt=/(?:([-]*\d+\.?(?:\d+)?))/,vt=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(function(t,e){return t[e]=Object.keys(t).length,t},{})},mt=vt("Undefined","Move","Cubic","End","Line","HLine","VLine"),bt=vt("Absolute","Relative"),gt=function(t){return t.trim().split(" ")},yt=function(t,e,n){var r=e||{x:0,y:0};if(!ht.test(t))throw new Error;var i=t.match(ht),a=Object(D["a"])(i,3),o=(a[0],a[1]),s=a[2];return n===bt.Relative&&(o=Number(o)+r.x,s=Number(s)+r.y),new ft(Number(o),Number(s))},wt=function(t,e,n){var r=e||{x:0,y:0};if(!dt.test(t))throw new Error;var i=t.match(dt),a=Object(D["a"])(i,2),o=(a[0],a[1]);return n===bt.Relative&&(o=Number(o)+r.x),new ft(Number(o),Number(e.y))},_t=function(t,e,n){var r=e||{x:0,y:0};if(!dt.test(t))throw new Error;var i=t.match(dt),a=Object(D["a"])(i,2),o=(a[0],a[1]);return n===bt.Relative&&(o=Number(o)+r.y),new ft(Number(e.x),Number(o))},xt=function(t,e,n,r){var i=[t[e]].map(function(t){return yt(t,null,r)}),a=Object(D["a"])(i,1),o=a[0],s={type:"Move",points:[o]};return{instr:s,current:s.points[0]}},kt=function(t,e,n,r){var i=t.slice(e,e+3).map(function(t){return yt(t,n,r)}),a=Object(D["a"])(i,3),o=a[0],s=a[1],c=a[2],u={type:"Cubic",points:[n,o,s,c]};return{instr:u,current:u.points[3]}},Ct=function(t,e,n,r){var i=[t[e]].map(function(t){return yt(t,n,r)}),a=Object(D["a"])(i,1),o=a[0],s={type:"Line",points:[n,o]};return{instr:s,current:s.points[1]}},St=function(t,e,n,r){var i=[t[e]].map(function(t){return _t(t,n,r)}),a=Object(D["a"])(i,1),o=a[0],s={type:"VLine",points:[n,o]};return{instr:s,current:s.points[1]}},Et=function(t,e,n,r){var i=[t[e]].map(function(t){return wt(t,n,r)}),a=Object(D["a"])(i,1),o=a[0],s={type:"HLine",points:[n,o]};return{instr:s,current:s.points[1]}},Nt=function(t){return t===t.toUpperCase()},$t={m:mt.Move,M:mt.Move,l:mt.Line,L:mt.Line,c:mt.Cubic,C:mt.Cubic,v:mt.VLine,V:mt.VLine,h:mt.HLine,H:mt.HLine},Tt=function(t,e){return-1!==Object.keys($t).filter(function(e){return e.toLowerCase()!==t}).indexOf(e)},Lt=function(t){var e=mt.Undefined,n=bt.Absolute,r=null,i=[],a=0,o=function(t){n=Nt(t)?bt.Absolute:bt.Relative},s=function(t){e=$t[t],a+=1,o(t)};while(e!==mt.End){var c=t[a];if(e===mt.Undefined)s(c);else if(e===mt.Move)if(Tt("m",c))s(c);else{var u=xt(t,a,r,n),l=u.instr,p=u.current;i.push(l),r=p,a+=1}else if(e===mt.Cubic)if(Tt("c",c))s(c);else{var f=kt(t,a,r,n),h=f.instr,d=f.current;i.push(h),r=d,a+=3}else if(e===mt.Line)if(Tt("l",c))s(c);else{var v=Ct(t,a,r,n),m=v.instr,b=v.current;i.push(m),r=b,a+=1}else if(e===mt.HLine)if(Tt("h",c))s(c);else{var g=Et(t,a,r,n),y=g.instr,w=g.current;i.push(y),r=w,a+=1}else if(e===mt.VLine)if(Tt("v",c))s(c);else{var _=St(t,a,r,n),x=_.instr,k=_.current;i.push(x),r=k,a+=1}else a+=1;a>=t.length-1&&(e=mt.End)}return i},At=function(t){return Lt(gt(t))},jt=function(t,e){e.beginPath(),t.forEach(function(t){"Move"===t.type&&e.moveTo(6*t.points[0].x-100,6*t.points[0].y-100),"Cubic"===t.type&&(e.moveTo(6*t.points[0].x-100,6*t.points[0].y-100),e.bezierCurveTo(6*t.points[1].x-100,6*t.points[1].y-100,6*t.points[2].x-100,6*t.points[2].y-100,6*t.points[3].x-100,6*t.points[3].y-100)),"Line"!==t.type&&"HLine"!==t.type&&"VLine"!==t.type||(e.moveTo(6*t.points[0].x-100,6*t.points[0].y-100),e.lineTo(6*t.points[1].x-100,6*t.points[1].y-100))}),e.stroke()},Rt={name:"ParserThirdStep",components:{FoldablePre:j},data:function(){return{input:"m 50,50 c -1.08,0 -1.56,-0.6 -1.56,-1.64 0,-3.4 4.68,-7.48 4.68,-12.04 0,-3 -1.88,-4.52 -4.84,-4.52 -3.52,0 -6.96,1.48 -10.4,7.2 h -0.56 c 2.08,-4.8 3.48,-8.48 3.48,-11.48 0,-2.24 -1.28,-3.36 -3.52,-3.36 -1.52,0 -3.12,0.44 -4.8,1.12 0.36,0.68 0.64,1.44 0.84,2.08 1.48,-0.68 2.48,-1.04 3.64,-1.04 1.28,0 1.84,0.6 1.84,1.76 0,2.92 -3.32,10.88 -8,23.16 0.8,0.12 1.44,0.24 2,0.48 l 0.12,0.04 c 5.68,-15.48 11.24,-18 14.92,-18 1.88,0 3.04,0.8 3.04,2.72 0,3.52 -4.68,7.64 -4.68,11.96 0,2.44 1.64,3.52 3.48,3.52 2.48,0 4.04,-1.56 6.08,-4.2 -0.72,-0.48 -1.12,-0.8 -1.68,-1.28 -1.4,2.28 -2.52,3.52 -4.08,3.52",result:""}},methods:{parseAndDisplay:function(){this.result=At(this.input),this.draw()},draw:function(){var t=this.$options.$context;t.fillStyle="lightblue",t.strokeStyle="black",t.fillRect(0,0,300,300),jt(At(this.input),t)}},mounted:function(){this.$options.$canvas=this.$el.getElementsByTagName("canvas")[0],this.$options.$context=this.$options.$canvas.getContext("2d"),this.parseAndDisplay()}},Ot=Rt,Pt=(n("0fe1"),Object(l["a"])(Ot,lt,pt,!1,null,null,null));Pt.options.__file="ParserFourthStep.vue";var Mt=Pt.exports,It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"textarea",domProps:{value:t.input},on:{change:t.parseAndDisplay,input:function(e){e.target.composing||(t.input=e.target.value)}}}),n("foldable-pre",[t._v(t._s(t.result))]),n("canvas",{attrs:{id:"parserthirdstep-canvas",width:"300",height:"300"}}),n("p",[t._v("We can see the result is still quite pleasant.")])],1)},Bt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("This will be quite a stretch, since my math has really faded since school. Of course, someone has already solved this before, and an article on Adaptive Subdivision of Bezier curves written by\n    "),n("a",{attrs:{href:"http://www.antigrain.com/research/adaptive_bezier/index.html"}},[t._v("Maxim Shemanarev")]),t._v(" gives us a reference implementation in C++. That will be easy to convert. I'll take the most naïve one, given at the start of the article, and, no matter the curve, will generate 10 lines out of it.")])}],Dt=n("8afe"),Ht=function(t,e,n,r,i){var a,o,s,c={x:0,y:0};return a=1-i,o=a*a*a,s=i*i*i,c.x=o*t.x+3*i*a*a*e.x+3*i*i*a*n.x+s*r.x,c.y=o*t.y+3*i*a*a*e.y+3*i*i*a*n.y+s*r.y,c},Ut=function(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=1/n,i=[],a=0;a<1;a+=r){var o=0===a?t.points[0]:e;e=Ht.apply(void 0,Object(Dt["a"])(t.points).concat([a])),i.push({type:"Line",points:[o,e]})}return i},Vt=function(t,e){this.x=t,this.y=e},Ft=/(?:([-]*\d+\.?(?:\d+)?),([-]*\d+\.?(?:\d+)?))/,Wt=/(?:([-]*\d+\.?(?:\d+)?))/,zt=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(function(t,e){return t[e]=Object.keys(t).length,t},{})},qt=zt("Undefined","Move","Cubic","End","Line","HLine","VLine"),Gt=zt("Absolute","Relative"),Jt=function(t){return t.trim().split(" ")},Kt=function(t,e,n){var r=e||{x:0,y:0};if(!Ft.test(t))throw new Error;var i=t.match(Ft),a=Object(D["a"])(i,3),o=(a[0],a[1]),s=a[2];return n===Gt.Relative&&(o=Number(o)+r.x,s=Number(s)+r.y),new Vt(Number(o),Number(s))},Zt=function(t,e,n){var r=e||{x:0,y:0};if(!Wt.test(t))throw new Error;var i=t.match(Wt),a=Object(D["a"])(i,2),o=(a[0],a[1]);return n===Gt.Relative&&(o=Number(o)+r.x),new Vt(Number(o),Number(e.y))},Qt=function(t,e,n){var r=e||{x:0,y:0};if(!Wt.test(t))throw new Error;var i=t.match(Wt),a=Object(D["a"])(i,2),o=(a[0],a[1]);return n===Gt.Relative&&(o=Number(o)+r.y),new Vt(Number(e.x),Number(o))},Xt=function(t,e,n,r){var i=[t[e]].map(function(t){return Kt(t,null,r)}),a=Object(D["a"])(i,1),o=a[0],s={type:"Move",points:[o]};return{instr:s,current:s.points[0]}},Yt=function(t,e,n,r){var i=t.slice(e,e+3).map(function(t){return Kt(t,n,r)}),a=Object(D["a"])(i,3),o=a[0],s=a[1],c=a[2],u={type:"Cubic",points:[n,o,s,c]};return{instr:u,current:u.points[3]}},te=function(t,e,n,r){var i=[t[e]].map(function(t){return Kt(t,n,r)}),a=Object(D["a"])(i,1),o=a[0],s={type:"Line",points:[n,o]};return{instr:s,current:s.points[1]}},ee=function(t,e,n,r){var i=[t[e]].map(function(t){return Qt(t,n,r)}),a=Object(D["a"])(i,1),o=a[0],s={type:"VLine",points:[n,o]};return{instr:s,current:s.points[1]}},ne=function(t,e,n,r){var i=[t[e]].map(function(t){return Zt(t,n,r)}),a=Object(D["a"])(i,1),o=a[0],s={type:"HLine",points:[n,o]};return{instr:s,current:s.points[1]}},re=function(t){return t===t.toUpperCase()},ie={m:qt.Move,M:qt.Move,l:qt.Line,L:qt.Line,c:qt.Cubic,C:qt.Cubic,v:qt.VLine,V:qt.VLine,h:qt.HLine,H:qt.HLine},ae=function(t,e){return-1!==Object.keys(ie).filter(function(e){return e.toLowerCase()!==t}).indexOf(e)},oe=function(t){var e=qt.Undefined,n=Gt.Absolute,r=null,i=[],a=0,o=function(t){n=re(t)?Gt.Absolute:Gt.Relative},s=function(t){e=ie[t],a+=1,o(t)};while(e!==qt.End){var c=t[a];if(e===qt.Undefined)s(c);else if(e===qt.Move)if(ae("m",c))s(c);else{var u=Xt(t,a,r,n),l=u.instr,p=u.current;i.push(l),r=p,a+=1}else if(e===qt.Cubic)if(ae("c",c))s(c);else{var f=Yt(t,a,r,n),h=f.instr,d=f.current;i.push(h),r=d,a+=3}else if(e===qt.Line)if(ae("l",c))s(c);else{var v=te(t,a,r,n),m=v.instr,b=v.current;i.push(m),r=b,a+=1}else if(e===qt.HLine)if(ae("h",c))s(c);else{var g=ne(t,a,r,n),y=g.instr,w=g.current;i.push(y),r=w,a+=1}else if(e===qt.VLine)if(ae("v",c))s(c);else{var _=ee(t,a,r,n),x=_.instr,k=_.current;i.push(x),r=k,a+=1}else a+=1;a>=t.length-1&&(e=qt.End)}return i},se=function(t){return t.reduce(function(t,e){return"Cubic"===e.type?(t=t.concat(Ut(e)),t):(t.push(e),t)},[])},ce=function(t){return oe(Jt(t))},ue={name:"ParserFifthStep",components:{FoldablePre:j},data:function(){return{input:"m 50,50 c -1.08,0 -1.56,-0.6 -1.56,-1.64 0,-3.4 4.68,-7.48 4.68,-12.04 0,-3 -1.88,-4.52 -4.84,-4.52 -3.52,0 -6.96,1.48 -10.4,7.2 h -0.56 c 2.08,-4.8 3.48,-8.48 3.48,-11.48 0,-2.24 -1.28,-3.36 -3.52,-3.36 -1.52,0 -3.12,0.44 -4.8,1.12 0.36,0.68 0.64,1.44 0.84,2.08 1.48,-0.68 2.48,-1.04 3.64,-1.04 1.28,0 1.84,0.6 1.84,1.76 0,2.92 -3.32,10.88 -8,23.16 0.8,0.12 1.44,0.24 2,0.48 l 0.12,0.04 c 5.68,-15.48 11.24,-18 14.92,-18 1.88,0 3.04,0.8 3.04,2.72 0,3.52 -4.68,7.64 -4.68,11.96 0,2.44 1.64,3.52 3.48,3.52 2.48,0 4.04,-1.56 6.08,-4.2 -0.72,-0.48 -1.12,-0.8 -1.68,-1.28 -1.4,2.28 -2.52,3.52 -4.08,3.52",result:""}},methods:{parseAndDisplay:function(){this.result=se(ce(this.input)),this.draw()},draw:function(){var t=this.$options.$context;t.fillStyle="lightblue",t.strokeStyle="black",t.fillRect(0,0,300,300),jt(se(ce(this.input)),t)}},mounted:function(){this.$options.$canvas=this.$el.getElementsByTagName("canvas")[0],this.$options.$context=this.$options.$canvas.getContext("2d"),this.parseAndDisplay()}},le=ue,pe=(n("3b8d"),Object(l["a"])(le,It,Bt,!1,null,null,null));pe.options.__file="ParserFifthStep.vue";var fe=pe.exports,he=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"textarea",domProps:{value:t.input},on:{change:t.parseAndDisplay,input:function(e){e.target.composing||(t.input=e.target.value)}}}),n("foldable-pre",[t._v(t._s(t.result))]),n("p",[t._v("Point fog rendering, and a test of an intuition about path segment normals.")]),n("canvas",{attrs:{width:"300",height:"300"}}),n("canvas",{attrs:{width:"300",height:"300"}})],1)},de=[],ve=function(t){var e=t.reduce(function(t,e){return t.push.apply(t,Object(Dt["a"])(e.points)),t},[]);return e.reduce(function(t,e){if(0===t.length)return[e];var n=t[t.length-1];return n.x===e.x&&n.y===e.y?t:(t.push(e),t)},[])},me=function(t,e){this.x=t,this.y=e},be=/(?:([-]*\d+\.?(?:\d+)?),([-]*\d+\.?(?:\d+)?))/,ge=/(?:([-]*\d+\.?(?:\d+)?))/,ye=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(function(t,e){return t[e]=Object.keys(t).length,t},{})},we=ye("Undefined","Move","Cubic","End","Line","HLine","VLine"),_e=ye("Absolute","Relative"),xe=function(t){return t.trim().split(" ")},ke=function(t,e,n){var r=e||{x:0,y:0};if(!be.test(t))throw new Error;var i=t.match(be),a=Object(D["a"])(i,3),o=(a[0],a[1]),s=a[2];return n===_e.Relative&&(o=Number(o)+r.x,s=Number(s)+r.y),new me(Number(o),Number(s))},Ce=function(t,e,n){var r=e||{x:0,y:0};if(!ge.test(t))throw new Error;var i=t.match(ge),a=Object(D["a"])(i,2),o=(a[0],a[1]);return n===_e.Relative&&(o=Number(o)+r.x),new me(Number(o),Number(e.y))},Se=function(t,e,n){var r=e||{x:0,y:0};if(!ge.test(t))throw new Error;var i=t.match(ge),a=Object(D["a"])(i,2),o=(a[0],a[1]);return n===_e.Relative&&(o=Number(o)+r.y),new me(Number(e.x),Number(o))},Ee=function(t,e,n,r){var i=[t[e]].map(function(t){return ke(t,null,r)}),a=Object(D["a"])(i,1),o=a[0],s={type:"Move",points:[o]};return{instr:s,current:s.points[0]}},Ne=function(t,e,n,r){var i=t.slice(e,e+3).map(function(t){return ke(t,n,r)}),a=Object(D["a"])(i,3),o=a[0],s=a[1],c=a[2],u={type:"Cubic",points:[n,o,s,c]};return{instr:u,current:u.points[3]}},$e=function(t,e,n,r){var i=[t[e]].map(function(t){return ke(t,n,r)}),a=Object(D["a"])(i,1),o=a[0],s={type:"Line",points:[n,o]};return{instr:s,current:s.points[1]}},Te=function(t,e,n,r){var i=[t[e]].map(function(t){return Se(t,n,r)}),a=Object(D["a"])(i,1),o=a[0],s={type:"VLine",points:[n,o]};return{instr:s,current:s.points[1]}},Le=function(t,e,n,r){var i=[t[e]].map(function(t){return Ce(t,n,r)}),a=Object(D["a"])(i,1),o=a[0],s={type:"HLine",points:[n,o]};return{instr:s,current:s.points[1]}},Ae=function(t){return t===t.toUpperCase()},je={m:we.Move,M:we.Move,l:we.Line,L:we.Line,c:we.Cubic,C:we.Cubic,v:we.VLine,V:we.VLine,h:we.HLine,H:we.HLine},Re=function(t,e){return-1!==Object.keys(je).filter(function(e){return e.toLowerCase()!==t}).indexOf(e)},Oe=function(t){var e=we.Undefined,n=_e.Absolute,r=null,i=[],a=0,o=function(t){n=Ae(t)?_e.Absolute:_e.Relative},s=function(t){e=je[t],a+=1,o(t)};while(e!==we.End){var c=t[a];if(e===we.Undefined)s(c);else if(e===we.Move)if(Re("m",c))s(c);else{var u=Ee(t,a,r,n),l=u.instr,p=u.current;i.push(l),r=p,a+=1}else if(e===we.Cubic)if(Re("c",c))s(c);else{var f=Ne(t,a,r,n),h=f.instr,d=f.current;i.push(h),r=d,a+=3}else if(e===we.Line)if(Re("l",c))s(c);else{var v=$e(t,a,r,n),m=v.instr,b=v.current;i.push(m),r=b,a+=1}else if(e===we.HLine)if(Re("h",c))s(c);else{var g=Le(t,a,r,n),y=g.instr,w=g.current;i.push(y),r=w,a+=1}else if(e===we.VLine)if(Re("v",c))s(c);else{var _=Te(t,a,r,n),x=_.instr,k=_.current;i.push(x),r=k,a+=1}else a+=1;a>=t.length-1&&(e=we.End)}return i},Pe=function(t){return t.reduce(function(t,e){return"Cubic"===e.type?(t=t.concat(Ut(e)),t):(t.push(e),t)},[])},Me=function(t){return Oe(xe(t))},Ie=function(t){return parseInt(t,10)},Be=function(t,e){e.fillStyle="red",t.forEach(function(t){e.fillRect(Ie(t.x)+2,Ie(t.y),1,5),e.fillRect(Ie(t.x),Ie(t.y)+2,5,1)})},De=function(t,e,n){var r=t[t.length-1];e.moveTo(t[0].x,t[0].y),t.forEach(function(t){var e=t.x-r.x,i=t.y-r.y,a=[-i,e],o=[(t.x+r.x)/2,(t.y+r.y)/2];n(a,o,t,r),r=t})},He=function(t,e){e.strokeStyle="blue",De(t,e,function(t,n,r,i){e.lineTo(n[0],n[1])}),e.stroke(),e.closePath(),e.beginPath(),e.strokeStyle="white",De(t,e,function(t,n,r,i){e.lineTo(t[0]+n[0],t[1]+n[1])}),e.stroke()},Ue={name:"ParserSixthStep",components:{FoldablePre:j},data:function(){return{input:"m 50,50 c -1.08,0 -1.56,-0.6 -1.56,-1.64 0,-3.4 4.68,-7.48 4.68,-12.04 0,-3 -1.88,-4.52 -4.84,-4.52 -3.52,0 -6.96,1.48 -10.4,7.2 h -0.56 c 2.08,-4.8 3.48,-8.48 3.48,-11.48 0,-2.24 -1.28,-3.36 -3.52,-3.36 -1.52,0 -3.12,0.44 -4.8,1.12 0.36,0.68 0.64,1.44 0.84,2.08 1.48,-0.68 2.48,-1.04 3.64,-1.04 1.28,0 1.84,0.6 1.84,1.76 0,2.92 -3.32,10.88 -8,23.16 0.8,0.12 1.44,0.24 2,0.48 l 0.12,0.04 c 5.68,-15.48 11.24,-18 14.92,-18 1.88,0 3.04,0.8 3.04,2.72 0,3.52 -4.68,7.64 -4.68,11.96 0,2.44 1.64,3.52 3.48,3.52 2.48,0 4.04,-1.56 6.08,-4.2 -0.72,-0.48 -1.12,-0.8 -1.68,-1.28 -1.4,2.28 -2.52,3.52 -4.08,3.52",result:""}},methods:{parseAndDisplay:function(){this.result=ve(Pe(Me(this.input))),this.draw()},draw:function(){var t=this.$options.$context;t.fillStyle="lightblue",t.strokeStyle="black",t.fillRect(0,0,300,300),Be(ve(Pe(Me(this.input))).map(function(t){return{x:6*t.x-100,y:6*t.y-100}}),t);var e=this.$options.$context1;e.fillStyle="lightblue",e.strokeStyle="black",e.fillRect(0,0,300,300),He(ve(Pe(Me(this.input))).map(function(t){return{x:6*t.x-100,y:6*t.y-100}}),e)}},mounted:function(){this.$options.$canvas=this.$el.getElementsByTagName("canvas")[0],this.$options.$canvas1=this.$el.getElementsByTagName("canvas")[1],this.$options.$context=this.$options.$canvas.getContext("2d"),this.$options.$context1=this.$options.$canvas1.getContext("2d"),this.parseAndDisplay()}},Ve=Ue,Fe=(n("d412"),Object(l["a"])(Ve,he,de,!1,null,null,null));Fe.options.__file="ParserSixthStep.vue";var We=Fe.exports,ze=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"textarea",domProps:{value:t.input},on:{change:t.parseAndDisplay,input:function(e){e.target.composing||(t.input=e.target.value)}}}),n("foldable-pre",[t._v(t._s(t.result))]),n("canvas",{attrs:{width:"300",height:"300"}}),n("canvas",{attrs:{width:"300",height:"300"}}),n("canvas",{attrs:{width:"300",height:"300"}})],1)},qe=[],Ge=n("f9b2"),Je=n.n(Ge),Ke=function(t,e,n){var r=t[t.length-1];e.moveTo(t[0].x,t[0].y),t.forEach(function(t){var e=t.x-r.x,i=t.y-r.y,a=[-i,e],o=[(t.x+r.x)/2,(t.y+r.y)/2];n(a,o,t,r),r=t})},Ze=function(t,e){e.strokeStyle="blue",Ke(t,e,function(t,n,r,i){e.lineTo(n[0],n[1])}),e.stroke(),e.closePath(),e.beginPath(),e.strokeStyle="white",Ke(t,e,function(t,n,r,i){e.lineTo(t[0]+n[0],t[1]+n[1])}),e.stroke()},Qe=function(t){return t.map(function(t){return[t.x,t.y]})},Xe={name:"ParserSevenStep",components:{FoldablePre:j},data:function(){return{input:"m 50,50 c -1.08,0 -1.56,-0.6 -1.56,-1.64 0,-3.4 4.68,-7.48 4.68,-12.04 0,-3 -1.88,-4.52 -4.84,-4.52 -3.52,0 -6.96,1.48 -10.4,7.2 h -0.56 c 2.08,-4.8 3.48,-8.48 3.48,-11.48 0,-2.24 -1.28,-3.36 -3.52,-3.36 -1.52,0 -3.12,0.44 -4.8,1.12 0.36,0.68 0.64,1.44 0.84,2.08 1.48,-0.68 2.48,-1.04 3.64,-1.04 1.28,0 1.84,0.6 1.84,1.76 0,2.92 -3.32,10.88 -8,23.16 0.8,0.12 1.44,0.24 2,0.48 l 0.12,0.04 c 5.68,-15.48 11.24,-18 14.92,-18 1.88,0 3.04,0.8 3.04,2.72 0,3.52 -4.68,7.64 -4.68,11.96 0,2.44 1.64,3.52 3.48,3.52 2.48,0 4.04,-1.56 6.08,-4.2 -0.72,-0.48 -1.12,-0.8 -1.68,-1.28 -1.4,2.28 -2.52,3.52 -4.08,3.52",result:""}},methods:{parseAndDisplay:function(){new Je.a;var t=Qe(ve(Pe(Me(this.input))));this.result=t,this.draw()},draw:function(){var t=this.$options.$context;t.fillStyle="lightblue",t.strokeStyle="black",t.fillRect(0,0,300,300),Be(ve(Pe(Me(this.input))).map(function(t){return{x:6*t.x-100,y:6*t.y-100}}),t);var e=this.$options.$context1;e.fillStyle="lightblue",e.strokeStyle="black",e.fillRect(0,0,300,300);var n=new Je.a,r=Qe(ve(Pe(Me(this.input)))),i=n.data(r).offsetLine(3)[0];Ze(i.map(function(t){return{x:6*t[0]-100,y:6*t[1]-100}}),e),this.$options.$context2.globalCompositeOperation="multiply",this.$options.$context2.drawImage(this.$options.$canvas,0,0,300,300),this.$options.$context2.drawImage(this.$options.$canvas1,0,0,300,300)}},mounted:function(){this.$options.$canvas=this.$el.getElementsByTagName("canvas")[0],this.$options.$canvas1=this.$el.getElementsByTagName("canvas")[1],this.$options.$canvas2=this.$el.getElementsByTagName("canvas")[2],this.$options.$context=this.$options.$canvas.getContext("2d"),this.$options.$context1=this.$options.$canvas1.getContext("2d"),this.$options.$context2=this.$options.$canvas2.getContext("2d"),this.parseAndDisplay()}},Ye=Xe,tn=(n("ecce"),Object(l["a"])(Ye,ze,qe,!1,null,null,null));tn.options.__file="ParserSeventhStep.vue";var en=tn.exports,nn={name:"Programmatically",components:{ParserFirstStep:M,ParserSecondStep:et,ParserThirdStep:ut,ParserFourthStep:Mt,ParserFifthStep:fe,ParserSixthStep:We,ParserSeventhStep:en,FoldablePre:j}},rn=nn,an=(n("74ef"),Object(l["a"])(rn,h,d,!1,null,null,null));an.options.__file="Programmatically.vue";var on=an.exports,sn=(n("a481"),n("6bde"));!function(t){var e="object"==("undefined"===typeof window?"undefined":Object(sn["a"])(window))&&window||"object"==("undefined"===typeof self?"undefined":Object(sn["a"])(self))&&self;"undefined"!=typeof exports?t(exports):e&&(e.hljs=t({}),"function"==typeof define&&n("3c35")&&define([],function(){return e.hljs}))}(function(t){function e(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function n(t){return t.nodeName.toLowerCase()}function r(t,e){var n=t&&t.exec(e);return n&&0===n.index}function i(t){return N.test(t)}function a(t){var e,n,r,a,o=t.className+" ";if(o+=t.parentNode?t.parentNode.className:"",n=$.exec(o))return _(n[1])?n[1]:"no-highlight";for(o=o.split(/\s+/),e=0,r=o.length;r>e;e++)if(a=o[e],i(a)||_(a))return a}function o(t){var e,n={},r=Array.prototype.slice.call(arguments,1);for(e in t)n[e]=t[e];return r.forEach(function(t){for(e in t)n[e]=t[e]}),n}function s(t){var e=[];return function t(r,i){for(var a=r.firstChild;a;a=a.nextSibling)3===a.nodeType?i+=a.nodeValue.length:1===a.nodeType&&(e.push({event:"start",offset:i,node:a}),i=t(a,i),n(a).match(/br|hr|img|input/)||e.push({event:"stop",offset:i,node:a}));return i}(t,0),e}function c(t,r,i){function a(){return t.length&&r.length?t[0].offset!==r[0].offset?t[0].offset<r[0].offset?t:r:"start"===r[0].event?t:r:t.length?t:r}function o(t){function r(t){return" "+t.nodeName+'="'+e(t.value).replace('"',"&quot;")+'"'}l+="<"+n(t)+k.map.call(t.attributes,r).join("")+">"}function s(t){l+="</"+n(t)+">"}function c(t){("start"===t.event?o:s)(t.node)}for(var u=0,l="",p=[];t.length||r.length;){var f=a();if(l+=e(i.substring(u,f[0].offset)),u=f[0].offset,f===t){p.reverse().forEach(s);do{c(f.splice(0,1)[0]),f=a()}while(f===t&&f.length&&f[0].offset===u);p.reverse().forEach(o)}else"start"===f[0].event?p.push(f[0].node):p.pop(),c(f.splice(0,1)[0])}return l+e(i.substr(u))}function u(t){return t.v&&!t.cached_variants&&(t.cached_variants=t.v.map(function(e){return o(t,{v:null},e)})),t.cached_variants||t.eW&&[o(t)]||[t]}function l(t){function e(t){return t&&t.source||t}function n(n,r){return new RegExp(e(n),"m"+(t.cI?"i":"")+(r?"g":""))}function r(i,a){if(!i.compiled){if(i.compiled=!0,i.k=i.k||i.bK,i.k){var o={},s=function(e,n){t.cI&&(n=n.toLowerCase()),n.split(" ").forEach(function(t){var n=t.split("|");o[n[0]]=[e,n[1]?Number(n[1]):1]})};"string"==typeof i.k?s("keyword",i.k):C(i.k).forEach(function(t){s(t,i.k[t])}),i.k=o}i.lR=n(i.l||/\w+/,!0),a&&(i.bK&&(i.b="\\b("+i.bK.split(" ").join("|")+")\\b"),i.b||(i.b=/\B|\b/),i.bR=n(i.b),i.endSameAsBegin&&(i.e=i.b),i.e||i.eW||(i.e=/\B|\b/),i.e&&(i.eR=n(i.e)),i.tE=e(i.e)||"",i.eW&&a.tE&&(i.tE+=(i.e?"|":"")+a.tE)),i.i&&(i.iR=n(i.i)),null==i.r&&(i.r=1),i.c||(i.c=[]),i.c=Array.prototype.concat.apply([],i.c.map(function(t){return u("self"===t?i:t)})),i.c.forEach(function(t){r(t,i)}),i.starts&&r(i.starts,a);var c=i.c.map(function(t){return t.bK?"\\.?("+t.b+")\\.?":t.b}).concat([i.tE,i.i]).map(e).filter(Boolean);i.t=c.length?n(c.join("|"),!0):{exec:function(){return null}}}}r(t)}function p(t,n,i,a){function o(t){return new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")}function s(t,e){var n,i;for(n=0,i=e.c.length;i>n;n++)if(r(e.c[n].bR,t))return e.c[n].endSameAsBegin&&(e.c[n].eR=o(e.c[n].bR.exec(t)[0])),e.c[n]}function c(t,e){if(r(t.eR,e)){for(;t.endsParent&&t.parent;)t=t.parent;return t}return t.eW?c(t.parent,e):void 0}function u(t,e){return!i&&r(e.iR,t)}function h(t,e){var n=w.cI?e[0].toLowerCase():e[0];return t.k.hasOwnProperty(n)&&t.k[n]}function d(t,e,n,r){var i=r?"":A.classPrefix,a='<span class="'+i,o=n?"":L;return a+=t+'">',a+e+o}function v(){var t,n,r,i;if(!k.k)return e(N);for(i="",n=0,k.lR.lastIndex=0,r=k.lR.exec(N);r;)i+=e(N.substring(n,r.index)),t=h(k,r),t?($+=t[1],i+=d(t[0],e(r[0]))):i+=e(r[0]),n=k.lR.lastIndex,r=k.lR.exec(N);return i+e(N.substr(n))}function m(){var t="string"==typeof k.sL;if(t&&!S[k.sL])return e(N);var n=t?p(k.sL,N,!0,C[k.sL]):f(N,k.sL.length?k.sL:void 0);return k.r>0&&($+=n.r),t&&(C[k.sL]=n.top),d(n.language,n.value,!1,!0)}function b(){E+=null!=k.sL?m():v(),N=""}function g(t){E+=t.cN?d(t.cN,"",!0):"",k=Object.create(t,{parent:{value:k}})}function y(t,e){if(N+=t,null==e)return b(),0;var n=s(e,k);if(n)return n.skip?N+=e:(n.eB&&(N+=e),b(),n.rB||n.eB||(N=e)),g(n,e),n.rB?0:e.length;var r=c(k,e);if(r){var i=k;i.skip?N+=e:(i.rE||i.eE||(N+=e),b(),i.eE&&(N=e));do{k.cN&&(E+=L),k.skip||k.sL||($+=k.r),k=k.parent}while(k!==r.parent);return r.starts&&(r.endSameAsBegin&&(r.starts.eR=r.eR),g(r.starts,"")),i.rE?0:e.length}if(u(e,k))throw new Error('Illegal lexeme "'+e+'" for mode "'+(k.cN||"<unnamed>")+'"');return N+=e,e.length||1}var w=_(t);if(!w)throw new Error('Unknown language: "'+t+'"');l(w);var x,k=a||w,C={},E="";for(x=k;x!==w;x=x.parent)x.cN&&(E=d(x.cN,"",!0)+E);var N="",$=0;try{for(var T,j,R=0;;){if(k.t.lastIndex=R,T=k.t.exec(n),!T)break;j=y(n.substring(R,T.index),T[0]),R=T.index+j}for(y(n.substr(R)),x=k;x.parent;x=x.parent)x.cN&&(E+=L);return{r:$,value:E,language:t,top:k}}catch(t){if(t.message&&-1!==t.message.indexOf("Illegal"))return{r:0,value:e(n)};throw t}}function f(t,n){n=n||A.languages||C(S);var r={r:0,value:e(t)},i=r;return n.filter(_).filter(x).forEach(function(e){var n=p(e,t,!1);n.language=e,n.r>i.r&&(i=n),n.r>r.r&&(i=r,r=n)}),i.language&&(r.second_best=i),r}function h(t){return A.tabReplace||A.useBR?t.replace(T,function(t,e){return A.useBR&&"\n"===t?"<br>":A.tabReplace?e.replace(/\t/g,A.tabReplace):""}):t}function d(t,e,n){var r=e?E[e]:n,i=[t.trim()];return t.match(/\bhljs\b/)||i.push("hljs"),-1===t.indexOf(r)&&i.push(r),i.join(" ").trim()}function v(t){var e,n,r,o,u,l=a(t);i(l)||(A.useBR?(e=document.createElementNS("http://www.w3.org/1999/xhtml","div"),e.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):e=t,u=e.textContent,r=l?p(l,u,!0):f(u),n=s(e),n.length&&(o=document.createElementNS("http://www.w3.org/1999/xhtml","div"),o.innerHTML=r.value,r.value=c(n,s(o),u)),r.value=h(r.value),t.innerHTML=r.value,t.className=d(t.className,l,r.language),t.result={language:r.language,re:r.r},r.second_best&&(t.second_best={language:r.second_best.language,re:r.second_best.r}))}function m(t){A=o(A,t)}function b(){if(!b.called){b.called=!0;var t=document.querySelectorAll("pre code");k.forEach.call(t,v)}}function g(){addEventListener("DOMContentLoaded",b,!1),addEventListener("load",b,!1)}function y(e,n){var r=S[e]=n(t);r.aliases&&r.aliases.forEach(function(t){E[t]=e})}function w(){return C(S)}function _(t){return t=(t||"").toLowerCase(),S[t]||S[E[t]]}function x(t){return t=(t||"").toLowerCase(),!S[t].disableAutodetect}var k=[],C=Object.keys,S={},E={},N=/^(no-?highlight|plain|text)$/i,$=/\blang(?:uage)?-([\w-]+)\b/i,T=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,L="</span>",A={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0};return t.highlight=p,t.highlightAuto=f,t.fixMarkup=h,t.highlightBlock=v,t.configure=m,t.initHighlighting=b,t.initHighlightingOnLoad=g,t.registerLanguage=y,t.listLanguages=w,t.getLanguage=_,t.autoDetection=x,t.inherit=o,t.IR="[a-zA-Z]\\w*",t.UIR="[a-zA-Z_]\\w*",t.NR="\\b\\d+(\\.\\d+)?",t.CNR="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",t.BNR="\\b(0b[01]+)",t.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",t.BE={b:"\\\\[\\s\\S]",r:0},t.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[t.BE]},t.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[t.BE]},t.PWM={b:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},t.C=function(e,n,r){var i=t.inherit({cN:"comment",b:e,e:n,c:[]},r||{});return i.c.push(t.PWM),i.c.push({cN:"doctag",b:"(?:TODO|FIXME|NOTE|BUG|XXX):",r:0}),i},t.CLCM=t.C("//","$"),t.CBCM=t.C("/\\*","\\*/"),t.HCM=t.C("#","$"),t.NM={cN:"number",b:t.NR,r:0},t.CNM={cN:"number",b:t.CNR,r:0},t.BNM={cN:"number",b:t.BNR,r:0},t.CSSNM={cN:"number",b:t.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},t.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[t.BE,{b:/\[/,e:/\]/,r:0,c:[t.BE]}]},t.TM={cN:"title",b:t.IR,r:0},t.UTM={cN:"title",b:t.UIR,r:0},t.METHOD_GUARD={b:"\\.\\s*"+t.UIR,r:0},t}),hljs.registerLanguage("lisp",function(t){var e="[a-zA-Z_\\-\\+\\*\\/\\<\\=\\>\\&\\#][a-zA-Z0-9_\\-\\+\\*\\/\\<\\=\\>\\&\\#!]*",n="\\|[^]*?\\|",r="(\\-|\\+)?\\d+(\\.\\d+|\\/\\d+)?((d|e|f|l|s|D|E|F|L|S)(\\+|\\-)?\\d+)?",i={cN:"meta",b:"^#!",e:"$"},a={cN:"literal",b:"\\b(t{1}|nil)\\b"},o={cN:"number",v:[{b:r,r:0},{b:"#(b|B)[0-1]+(/[0-1]+)?"},{b:"#(o|O)[0-7]+(/[0-7]+)?"},{b:"#(x|X)[0-9a-fA-F]+(/[0-9a-fA-F]+)?"},{b:"#(c|C)\\("+r+" +"+r,e:"\\)"}]},s=t.inherit(t.QSM,{i:null}),c=t.C(";","$",{r:0}),u={b:"\\*",e:"\\*"},l={cN:"symbol",b:"[:&]"+e},p={b:e,r:0},f={b:n},h={b:"\\(",e:"\\)",c:["self",a,s,o,p]},d={c:[o,s,u,l,h,p],v:[{b:"['`]\\(",e:"\\)"},{b:"\\(quote ",e:"\\)",k:{name:"quote"}},{b:"'"+n}]},v={v:[{b:"'"+e},{b:"#'"+e+"(::"+e+")*"}]},m={b:"\\(\\s*",e:"\\)"},b={eW:!0,r:0};return m.c=[{cN:"name",v:[{b:e},{b:n}]},b],b.c=[d,v,m,a,o,s,c,u,l,f,p],{i:/\S/,c:[o,i,a,s,c,d,v,m,p]}}),hljs.registerLanguage("javascript",function(t){var e="[A-Za-z$_][0-9A-Za-z$_]*",n={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},r={cN:"number",v:[{b:"\\b(0[bB][01]+)"},{b:"\\b(0[oO][0-7]+)"},{b:t.CNR}],r:0},i={cN:"subst",b:"\\$\\{",e:"\\}",k:n,c:[]},a={cN:"string",b:"`",e:"`",c:[t.BE,i]};i.c=[t.ASM,t.QSM,a,r,t.RM];var o=i.c.concat([t.CBCM,t.CLCM]);return{aliases:["js","jsx"],k:n,c:[{cN:"meta",r:10,b:/^\s*['"]use (strict|asm)['"]/},{cN:"meta",b:/^#!/,e:/$/},t.ASM,t.QSM,a,t.CLCM,t.CBCM,r,{b:/[{,]\s*/,r:0,c:[{b:e+"\\s*:",rB:!0,r:0,c:[{cN:"attr",b:e,r:0}]}]},{b:"("+t.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[t.CLCM,t.CBCM,t.RM,{cN:"function",b:"(\\(.*?\\)|"+e+")\\s*=>",rB:!0,e:"\\s*=>",c:[{cN:"params",v:[{b:e},{b:/\(\s*\)/},{b:/\(/,e:/\)/,eB:!0,eE:!0,k:n,c:o}]}]},{b:/</,e:/(\/\w+|\w+\/)>/,sL:"xml",c:[{b:/<\w+\s*\/>/,skip:!0},{b:/<\w+/,e:/(\/\w+|\w+\/)>/,skip:!0,c:[{b:/<\w+\s*\/>/,skip:!0},"self"]}]}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[t.inherit(t.TM,{b:e}),{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,c:o}],i:/\[|%/},{b:/\$[(.]/},t.METHOD_GUARD,{cN:"class",bK:"class",e:/[{;=]/,eE:!0,i:/[:"\[\]]/,c:[{bK:"extends"},t.UTM]},{bK:"constructor",e:/\{/,eE:!0}],i:/#(?!!)/}}),hljs.registerLanguage("elm",function(t){var e={v:[t.C("--","$"),t.C("{-","-}",{c:["self"]})]},n={cN:"type",b:"\\b[A-Z][\\w']*",r:0},r={b:"\\(",e:"\\)",i:'"',c:[{cN:"type",b:"\\b[A-Z][\\w]*(\\((\\.\\.|,|\\w+)\\))?"},e]},i={b:"{",e:"}",c:r.c},a={cN:"string",b:"'\\\\?.",e:"'",i:"."};return{k:"let in if then else case of where module import exposing type alias as infix infixl infixr port effect command subscription",c:[{bK:"port effect module",e:"exposing",k:"port effect module where command subscription exposing",c:[r,e],i:"\\W\\.|;"},{b:"import",e:"$",k:"import as exposing",c:[r,e],i:"\\W\\.|;"},{b:"type",e:"$",k:"type alias",c:[n,r,i,e]},{bK:"infix infixl infixr",e:"$",c:[t.CNM,e]},{b:"port",e:"$",k:"port",c:[e]},a,t.QSM,t.CNM,n,t.inherit(t.TM,{b:"^[_a-z][\\w']*"}),e,{b:"->|<-"}],i:/;/}});var cn={name:"app",components:{Manual:f,Programmatically:on},mounted:function(){window&&window.requestIdleCallback&&window.requestIdleCallback(function(){window.hljs&&window.hljs.initHighlighting()})}},un=cn,ln=(n("034f"),Object(l["a"])(un,i,a,!1,null,null,null));ln.options.__file="App.vue";var pn=ln.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(pn)}}).$mount("#app")},6136:function(t,e,n){},"6a76":function(t,e,n){},"6ea2":function(t,e,n){},"704c":function(t,e,n){},"71db":function(t,e,n){},"74ef":function(t,e,n){"use strict";var r=n("6136"),i=n.n(r);i.a},"770a":function(t,e,n){"use strict";var r=n("1fc2"),i=n.n(r);i.a},b597:function(t,e,n){"use strict";var r=n("5003"),i=n.n(r);i.a},b9f6:function(t,e,n){},c21b:function(t,e,n){},c508:function(t,e,n){"use strict";var r=n("cd3b"),i=n.n(r);i.a},cc0a:function(t,e,n){"use strict";var r=n("71db"),i=n.n(r);i.a},cd3b:function(t,e,n){},d412:function(t,e,n){"use strict";var r=n("6a76"),i=n.n(r);i.a},e2e3:function(t,e,n){},ecce:function(t,e,n){"use strict";var r=n("6ea2"),i=n.n(r);i.a}});
//# sourceMappingURL=app.7235c9fe.js.map